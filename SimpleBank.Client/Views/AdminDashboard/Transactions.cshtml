@model IEnumerable<SimpleBankClient.Entity.Dto.TransactionDetailsDto>

@{
    Layout = "_HomeLayout";
    ViewData["Title"] = "Transactions";
}

<div class="d-flex">
    <!-- Sidebar -->
    @await Html.PartialAsync("_SidebarPartial")

    <!-- Main content -->
    <div class="p-4 flex-grow-1 w-100">
        <div class="card shadow-sm border-primary rounded-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">All Transactions</h4>
            </div>

            <div class="card-body">
                @if (Model != null && Model.Any())
                {
                    <div class="table-responsive">
                        <table id="transactionsTable" class="table table-bordered table-striped align-middle w-100">
                            <thead class="table-info text-center">
                                <tr>
                                    <th>#</th>
                                    <th>Full Name</th>
                                    <th>From Account</th>
                                    <th>From IFSC</th>
                                    <th>To Account</th>
                                    <th>To IFSC</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    int count = 1;
                                    foreach (var txn in Model)
                                    {
                                        <tr class="text-center">
                                            <td>@count</td>
                                            <td>@txn.FullName</td>
                                            <td>@txn.FromAccount</td>
                                            <td>@txn.FromIFSC</td>
                                            <td>@txn.ToAccount</td>
                                            <td>@txn.ToIFSC</td>
                                            <td>@txn.TransactionType</td>
                                            <td class="text-end">₹@txn.Amount.ToString("N2")</td>
                                            <td>@txn.TransactionDate.ToString("dd-MM-yyyy hh:mm tt")</td>
                                        </tr>
                                        count++;
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info text-center">No transactions found.</div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#transactionsTable').DataTable({
                responsive: true,
                pageLength: 10,
                lengthMenu: [5, 10, 25, 50],
                order: [[8, "desc"]], // sort by date by default
                language: {
                    searchPlaceholder: "Search transactions..."
                }
            });
        });
    </script>
}
